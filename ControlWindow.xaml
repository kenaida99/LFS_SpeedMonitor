<Window x:Class="ControlWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Overlay Control" Height="300" Width="200"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Topmost="True"
        ShowInTaskbar="True"
        Background="#1E1E2E"
        WindowStyle="None"
        AllowsTransparency="True"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        Loaded="Window_Loaded">

    <Window.Resources>
        <!-- Modern Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#3A3A5A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="6"
                                Padding="12,8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#5A5A8A"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#7A7ABA"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Edit Mode Button (Green accent) -->
        <Style x:Key="EditButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#2D5A3D"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3D7A4D"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Normal Mode Button (Blue accent) -->
        <Style x:Key="NormalButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#2D4A6A"/>

            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3D6A9A"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- CheckBox Style -->
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="#CCCCCC"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>

    <Border Background="#1E1E2E" CornerRadius="10" BorderBrush="#3A3A5A" BorderThickness="1">
        <Grid Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title Bar with Close Button -->
            <Grid Grid.Row="0" Margin="0,0,0,12">
                <TextBlock Text="🎮 Overlay Control" 
                           FontWeight="Bold" 
                           FontSize="14"
                           Foreground="#CCCCCC" 
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"/>
                <Button Content="✕" 
                        HorizontalAlignment="Right"
                        Background="Transparent"
                        Foreground="#888888"
                        BorderThickness="0"
                        FontSize="14"
                        Width="24" Height="24"
                        Cursor="Hand"
                        Click="btnClose_Click"/>
            </Grid>

            <!-- Divider -->
            <Rectangle Grid.Row="1" Height="1" Fill="#3A3A5A" Margin="0,0,0,12"/>

            <!-- Visibility Controls -->
            <StackPanel Grid.Row="2" Margin="0,0,0,15">
                <TextBlock Text="Visibility" FontWeight="Bold" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                <CheckBox x:Name="chkTime" Content="Time Difference" Checked="chkTime_Checked" Unchecked="chkTime_Unchecked"/>
                <CheckBox x:Name="chkSpeed" Content="Speed Difference" Checked="chkSpeed_Checked" Unchecked="chkSpeed_Unchecked"/>
                <CheckBox x:Name="chkRadar" Content="Radar Overlay" Checked="chkRadar_Checked" Unchecked="chkRadar_Unchecked"/>
            </StackPanel>

            <!-- Connection Settings -->
            <StackPanel Grid.Row="3" Margin="0,0,0,15">
                <TextBlock Text="InSim Password" FontWeight="Bold" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                <PasswordBox x:Name="txtPassword" Margin="0,0,0,5" Height="25" Background="#3A3A5A" Foreground="White" BorderThickness="0"/>
                <Button x:Name="btnReconnect" Content="Reconnect" Style="{StaticResource ModernButton}" Click="btnReconnect_Click"/>
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom">
                <Button x:Name="btnEditMode" 
                        Content="✏️ Edit Mode" 
                        Style="{StaticResource EditButton}"
                        Width="100" Height="36" 
                        Margin="0,0,10,0" 
                        Click="btnEditMode_Click"/>

            </StackPanel>
        </Grid>
    </Border>
</Window>